# Документ требований к продукту: Gogetlinks Task Parser

## Резюме

**Название продукта:** Gogetlinks Task Parser
**Версия:** 1.0 MVP
**Дата документа:** 2026-02-05
**Статус:** Готово к разработке

### Описание проблемы
Фриланс-разработчики, использующие gogetlinks.net, должны вручную проверять платформу несколько раз в день, чтобы обнаружить новые задачи, тратя ценное время и часто упуская возможности из-за задержек.

### Решение
Автоматический парсер задач, который запускается ежечасно через cron, аутентифицируется с использованием сервиса анти-капчи, извлекает данные задач и сохраняет их в базу данных MySQL с дедупликацией, позволяя разработчикам запрашивать новые возможности по требованию.

### Метрики успеха
- 95% успешных парсингов
- < 5 минут среднее время цикла
- Нулевое количество дубликатов
- 100% новых задач захвачено в течение 1 часа после публикации

## Видение продукта и цели

### Видение
Позволить фриланс-разработчикам сосредоточиться на своей основной работе, автоматизируя утомительную задачу мониторинга gogetlinks.net для поиска новых возможностей.

### Основные цели
1. **Автоматизация:** Заменить ручную проверку запланированной автоматизацией
2. **Сохранение данных:** Хранить исторические данные задач для анализа
3. **Надежность:** Работать без присмотра с минимальным вмешательством
4. **Простота:** Развертывание одним скриптом на VPS

### Не входящее в MVP
- Уведомления в реальном времени
- Веб-интерфейс для просмотра задач
- Движок фильтрации/рекомендаций задач
- Мультиплатформенная поддержка (только gogetlinks.net)

## Целевые пользователи

### Основная персона: Фриланс-разработчик
- **Демография:** 25-40 лет, разработчик среднего-экспертного уровня
- **Болевые точки:**
  - Ручная проверка прерывает рабочий процесс
  - Пропуск задач из-за задержки проверки
  - Нет исторических данных для анализа трендов
- **Технические навыки:** Уверенное владение VPS, cron, MySQL
- **Паттерн использования:** Запрос к базе данных 2-3 раза в день для новых задач

### Вторичная персона: Агентство разработки
- **Сценарий использования:** Мониторинг задач для распределения в команде
- **Масштаб:** Управление несколькими фрилансерами
- **Будущее улучшение:** API для интеграции с внутренними инструментами

## Основные функции

### F1: Аутентификация и обработка капчи
**Приоритет:** ОБЯЗАТЕЛЬНО
**Описание:** Автоматический вход в gogetlinks.net с интеграцией anti-captcha.com
**Пользовательская история:** Как пользователь, я хочу, чтобы парсер аутентифицировался автоматически, чтобы мне не нужно было вручную входить в систему
**Критерии приемки:**
- Успешная аутентификация >95% попыток
- Решение капчи в течение 120 секунд
- Валидация сессии перед повторной аутентификацией

### F2: Парсинг списка задач
**Приоритет:** ОБЯЗАТЕЛЬНО
**Описание:** Извлечение данных задач со страницы НОВЫХ задач
**Пользовательская история:** Как пользователь, я хочу, чтобы все доступные задачи были извлечены, чтобы я мог видеть каждую возможность
**Критерии приемки:**
- Парсинг task_id, domain, customer, price, time_passed
- Корректная обработка пустых списков задач
- Извлечение 100+ задач за < 60 секунд

### F3: Хранение в базе данных и дедупликация
**Приоритет:** ОБЯЗАТЕЛЬНО
**Описание:** Сохранение задач в MySQL с автоматическим обнаружением дубликатов
**Пользовательская история:** Как пользователь, я хочу, чтобы задачи сохранялись без дубликатов, чтобы я мог отслеживать новые и существующие
**Критерии приемки:**
- Ограничение UNIQUE на task_id предотвращает дубликаты
- Флаг `is_new` помечает задачи впервые
- Временная метка `updated_at` отслеживает изменения

### F4: Управление конфигурацией
**Приоритет:** ОБЯЗАТЕЛЬНО
**Описание:** Конфигурация на основе INI для учетных данных и настроек
**Пользовательская история:** Как пользователь, я хочу легко настроить учетные данные без редактирования кода
**Критерии приемки:**
- config.ini с секциями: gogetlinks, anticaptcha, database, output, logging
- Валидация при запуске с понятными сообщениями об ошибках
- Безопасные права доступа к файлу (chmod 600)

### F5: Логирование и вывод
**Приоритет:** ОБЯЗАТЕЛЬНО
**Описание:** Структурированное логирование в файл с опциональным выводом в консоль
**Пользовательская история:** Как пользователь, я хочу подробные логи для устранения неполадок
**Критерии приемки:**
- Уровни логирования: INFO, WARNING, ERROR
- Ротация логов при 10 МБ (хранить 5 файлов)
- Переключатель вывода в консоль в конфиге

### F6: Запланированное выполнение
**Приоритет:** ОБЯЗАТЕЛЬНО
**Описание:** Ежечасное выполнение через Cron
**Пользовательская история:** Как пользователь, я хочу, чтобы парсер запускался автоматически, чтобы мне не нужно было помнить
**Критерии приемки:**
- Коды выхода для мониторинга (0=успех, 1=ошибка аутентификации, 2=ошибка капчи, и т.д.)
- Корректная обработка перекрывающихся запусков
- Email при сбое cron (на уровне системы)

## Будущие улучшения (После MVP)

### Функции v1.1
- Парсинг деталей (описание, требования, контакты)
- Сохранение cookie сессии (пропуск аутентификации, если действительна)
- Логика повторных попыток с экспоненциальной задержкой
- Email/Telegram уведомления о новых задачах

### Функции v2.0
- Веб-панель (Flask + Bootstrap)
- Фильтрация задач по цене, дедлайну, клиенту
- Историческая аналитика (тренды, средние цены)
- Экспорт в CSV/Excel

### Функции v3.0
- Поддержка множества пользователей (командные аккаунты)
- API для сторонних интеграций
- Движок рекомендаций на машинном обучении
- Контейнеризация Docker + развертывание Coolify

## Технические требования

### Технологический стек
| Компонент | Технология | Версия | Обоснование |
|-----------|-----------|---------|---------------|
| Язык | Python | 3.8+ | Зрелая экосистема для скрапинга |
| Браузер | Selenium + Chrome | 4.10+ | Стандарт для headless автоматизации |
| База данных | MySQL | 8.0+ | Надежное соответствие ACID |
| Планировщик | Cron | System | Нативное планирование Linux |
| Капча | Anti-Captcha API | Latest | Решение с участием человека |

### Инфраструктура
- **Окружение:** VPS (Ubuntu 20.04+)
- **Развертывание:** Git clone + venv + cron
- **Без Docker:** Упрощенное развертывание MVP

### Требования к производительности
- Цикл парсинга: < 5 минут для 100 задач
- Запрос к базе данных: < 100мс для запроса "новые задачи"
- Использование памяти: < 500 МБ во время выполнения
- Использование диска: < 1 ГБ для 6 месяцев данных

### Требования к безопасности
- Учетные данные никогда не логируются
- Права доступа config.ini: 600 (чтение/запись только для владельца)
- Пользователь MySQL с минимальными привилегиями (только SELECT, INSERT, UPDATE)
- Нет секретов в коде или системе контроля версий

## Пользовательский интерфейс

**MVP:** Только командная строка
**Формат вывода (когда включен):**
```
╔═══════════════════════════════════════════════════════════╗
║          Gogetlinks Parser - Task Report                  ║
╠═══════════╤════════════════╤══════════╤═══════════════════╣
║ Task ID   │ Domain         │ Price    │ Customer          ║
╠═══════════╪════════════════╪══════════╪═══════════════════╣
║ 123456    │ example.com    │ $50.00   │ Client A          ║
║ 123457    │ testsite.org   │ $75.00   │ Client B          ║
╚═══════════╧════════════════╧══════════╧═══════════════════╝
Total: 2 new tasks found
```

## Зависимости и интеграции

### Внешние сервисы
- **gogetlinks.net:** Источник данных (без SLA)
- **anti-captcha.com:** Решение капчи (99% uptime, $1/1000 капч)

### Библиотеки Python
```
selenium>=4.10.0
mysql-connector-python>=8.0.0
```

## Критерии успеха и KPI

| Метрика | Целевое значение | Измерение |
|--------|--------|-------------|
| Успешность парсинга | >95% | Код выхода 0 / всего запусков |
| Среднее время цикла | 2-3 мин | Анализ логов |
| Успешность капчи | >90% | Успешные аутентификации / попытки |
| Нулевые дубликаты | 100% | Обеспечение ограничений БД |
| Время работы | >99% | История выполнения Cron |

## Риски и меры по снижению

| Риск | Вероятность | Воздействие | Снижение |
|------|------------|--------|------------|
| Изменения макета сайта | Средняя | Высокое | Гибкие селекторы, дампы HTML при ошибке |
| Сбой капчи | Низкая | Критическое | Логика повторных попыток, валидация API ключа |
| Блокировка IP | Низкая | Высокое | Ограничение частоты (макс 1/час), ротация user-agent |
| Переполнение базы данных | Низкая | Среднее | Ротация логов, ежемесячная архивация |

## План релиза

### Фаза 1: MVP (Неделя 1-2)
- Базовая аутентификация + парсинг + хранение
- Базовое логирование и настройка cron
- Руководство по ручному развертыванию

### Фаза 2: Улучшения (Неделя 3-4)
- Парсинг деталей
- Сохранение сессии
- Улучшенная обработка ошибок

### Фаза 3: Продуктизация (Месяц 2+)
- Веб-панель
- Уведомления
- Упаковка Docker

## Приложения

### Приложение A: Схема базы данных
См. `Architecture.md` для полного DDL

### Приложение B: Формат файла конфигурации
См. `Specification.md` для полной структуры

### Приложение C: Коды выхода
- 0: Успех
- 1: Ошибка аутентификации
- 2: Ошибка решения капчи
- 3: Ошибка конфигурации
- 4: Ошибка базы данных
- 5: Ошибка WebDriver
- 99: Неожиданная ошибка

---

**Версия PRD:** 1.0
**Владелец документа:** Project Lead
**Утверждено:** [В ожидании]
**Следующий пересмотр:** После развертывания MVP
